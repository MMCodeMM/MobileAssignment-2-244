# 習作二：API 整合與資料同步 (手機網頁應用)

## 學生資料

- 姓名：[你的姓名]
- 學號：[你的學號]
- 主題編號：2
- 主題名稱：運動教學

## 專案說明

本專案是一個運動教學清單應用程式，具備完整的 API 整合功能。應用程式使用 TypeScript 開發，整合了使用者認證、收藏功能、搜尋篩選等完整功能。

### 主要技術

- **TypeScript** - 類型安全的 JavaScript 超集
- **Ionic Framework** - 跨平台 UI 組件框架
- **esbuild** - 快速的 JavaScript 打包工具
- **Fetch API** - 現代瀏覽器 HTTP 客戶端
- **Local Storage** - 瀏覽器本地存儲

### API 端點

使用的 API 基礎地址：`https://dae-mobile-assignment.hkit.cc/api`
主題專用端點：`/exercises` (運動教學)

## 功能完成度自評

### 清單功能（30 分）

- 載入主題資料列表
  - [x] 載入狀態顯示（5 分） - 具備載入動畫和指示器
  - [x] 正確顯示資料（5 分） - 顯示運動教學的完整資訊
  - [x] 錯誤處理提示（5 分） - 網路錯誤和 API 錯誤處理
- 分頁載入
  - [x] 正確載入更多資料（10 分） - 實現載入更多按鈕
  - [x] 錯誤處理提示（5 分） - 載入更多失敗時的錯誤提示

### 使用者認證（35 分）

- [x] 註冊功能（10 分） - 完整的使用者註冊流程
- [x] 登入功能（10 分） - 使用者登入和狀態管理
- [x] 登出功能（5 分） - 清除本地狀態和 token
- [x] 儲存登入狀態（10 分） - 使用 localStorage 持久化

### 收藏功能（35 分）

- [x] 收藏項目（10 分） - 點擊收藏按鈕新增收藏
- [x] 取消收藏項目（10 分） - 點擊收藏按鈕取消收藏
- [x] 顯示收藏狀態（10 分） - 視覺化顯示收藏狀態
- [x] 整合登入用戶的收藏項目（5 分） - 載入使用者收藏清單

### 加分項目（最多 30 分）

- [ ] 無限捲動（5 分） - 未實現，使用載入更多按鈕
- [x] 搜尋功能（5 分） - 關鍵字搜尋運動教學
- [x] 分類過濾（5 分） - 按分類篩選
- [x] 排序功能（5 分） - 按標題和難度排序
- [x] 資料驗證（5 分） - 輸入驗證和錯誤處理
- [x] 只顯示已收藏項目（5 分） - 收藏項目篩選功能

## 檔案結構

```
├── index.html              # 主要 HTML 文件
├── package.json             # Node.js 專案配置
├── tsconfig.json           # TypeScript 配置
├── README.md               # 專案說明
├── src/
│   ├── main.ts             # 主要應用程式邏輯
│   ├── api.ts              # API 服務層
│   ├── types.ts            # TypeScript 類型定義
│   └── style.css           # 樣式表
└── dist/
    └── main.js             # 編譯後的 JavaScript
```

## 本地開發

### 安裝依賴

```bash
npm install
```

### 編譯 TypeScript

```bash
npm run build
```

### 監視模式編譯

```bash
npm run dev
```

### 啟動本地伺服器

```bash
npm run serve
```

然後在瀏覽器中訪問 `http://localhost:8000`

## 主要功能說明

### 1. 使用者認證

- **註冊**：使用者可以創建新帳戶
- **登入**：支持使用者名稱和密碼登入
- **狀態管理**：使用 localStorage 保存 token
- **自動檢查**：頁面載入時自動檢查登入狀態

### 2. 運動教學清單

- **分頁載入**：每頁載入 5 個項目
- **載入更多**：點擊按鈕載入下一頁
- **錯誤處理**：網路錯誤和 API 錯誤的友善提示
- **空狀態**：沒有資料時的提示訊息

### 3. 搜尋和篩選

- **關鍵字搜尋**：搜尋運動教學標題和描述
- **分類篩選**：按運動類別篩選
- **排序功能**：按標題或難度排序
- **重設篩選**：一鍵清除所有篩選條件

### 4. 收藏功能

- **收藏管理**：新增和移除收藏項目
- **狀態同步**：與伺服器同步收藏狀態
- **視覺指示**：書籤圖示顯示收藏狀態
- **收藏預覽**：快速查看收藏的項目

### 5. 使用者介面

- **響應式設計**：適配不同螢幕尺寸
- **載入狀態**：友善的載入動畫
- **錯誤提示**：清楚的錯誤訊息
- **懷舊風格**：仿 Windows 98 風格的 UI

## API 整合

### 認證 API

- `POST /auth/signup` - 使用者註冊
- `POST /auth/login` - 使用者登入
- `GET /auth/check` - 檢查登入狀態

### 運動教學 API

- `GET /exercises` - 取得運動教學清單
  - 支持分頁、搜尋、分類、排序參數

### 收藏 API

- `POST /bookmarks/{id}` - 收藏項目
- `DELETE /bookmarks/{id}` - 取消收藏
- `GET /bookmarks` - 取得收藏清單

## 錯誤處理

- **網路錯誤**：顯示網路連線問題提示
- **認證錯誤**：自動跳轉到登入畫面
- **API 錯誤**：顯示具體的錯誤訊息
- **輸入驗證**：檢查必填欄位和格式

## 瀏覽器支援

- Chrome 85+
- Firefox 80+
- Safari 14+
- Edge 85+

支持所有現代瀏覽器，使用 ES2020 標準。

## 開發筆記

### 技術決策

1. **TypeScript**：提供類型安全和更好的開發體驗
2. **Ionic Framework**：提供一致的跨平台 UI 組件
3. **esbuild**：快速的編譯和打包
4. **fetch API**：現代的 HTTP 客戶端，無需額外依賴

### 架構設計

- **API Service Layer**：封裝所有 API 調用
- **Type Definitions**：完整的 TypeScript 類型定義
- **State Management**：簡單的狀態管理模式
- **Event-Driven**：基於事件的使用者互動

### 未來改進

- [ ] 實現無限滾動替代載入更多按鈕
- [ ] 添加離線支持和緩存
- [ ] 實現更複雜的搜尋功能
- [ ] 添加單元測試和整合測試
- [ ] 優化載入性能和用戶體驗
